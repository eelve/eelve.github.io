{"name":"git","postlist":[{"title":"双仓库同步代码","slug":"双仓库同步代码","date":"2020-04-30T07:36:38.000Z","updated":"2021-04-19T06:44:39.223Z","comments":true,"path":"api/articles/双仓库同步代码.json","excerpt":null,"keywords":"南国薏米","cover":"https://image.eelve.com/eblog/202004301-c3fd0726d60e4564baf69f2f541e53e3.png","content":"<p>【<strong>前情提要</strong>】在最近的工作中，涉及到把一份代码同时上传到两个git仓库，下面是简单的记录。</p>\n<hr>\n<h1 id=\"壹、准备工作\"><a href=\"#壹、准备工作\" class=\"headerlink\" title=\"壹、准备工作\"></a>壹、准备工作</h1><p>分别在Github和Gitee平台上配置SSH公钥，便于使用git协议拉取和提交推送代码的时候需要输入密码。 </p>\n<h1 id=\"贰、拉取代码\"><a href=\"#贰、拉取代码\" class=\"headerlink\" title=\"贰、拉取代码\"></a>贰、拉取代码</h1><p>我这里以我的<a href=\"git@github.com:eelve/fly.git\">git@github.com:eelve/fly.git</a>仓库为示例来说明。使用工具或者命令拉取<a href=\"git@github.com:eelve/fly.git\">git@github.com:eelve/fly.git</a></p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git <span class=\"built_in\">clone</span> git@github.com:eelve/fly.git</span><br></pre></td></tr></table></figure>\n<h1 id=\"叁、修改配置文件\"><a href=\"#叁、修改配置文件\" class=\"headerlink\" title=\"叁、修改配置文件\"></a>叁、修改配置文件</h1><p>进入拉取的仓库文件夹下，找到<code>.git</code>的隐藏文件夹，打开<code>config</code>文件</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[core]</span><br><span class=\"line\">\trepositoryformatversion = 0</span><br><span class=\"line\">\tfilemode = <span class=\"literal\">false</span></span><br><span class=\"line\">\tbare = <span class=\"literal\">false</span></span><br><span class=\"line\">\tlogallrefupdates = <span class=\"literal\">true</span></span><br><span class=\"line\">\tsymlinks = <span class=\"literal\">false</span></span><br><span class=\"line\">\tignorecase = <span class=\"literal\">true</span></span><br><span class=\"line\">[submodule]</span><br><span class=\"line\">\tactive = .</span><br><span class=\"line\">[remote <span class=\"string\">&quot;origin&quot;</span>]</span><br><span class=\"line\">\turl = git@github.com:eelve/fly.git</span><br><span class=\"line\">\tfetch = +refs/heads/*:refs/remotes/origin/*</span><br><span class=\"line\">[branch <span class=\"string\">&quot;master&quot;</span>]</span><br><span class=\"line\">\tremote = origin</span><br><span class=\"line\">\tmerge = refs/heads/master</span><br><span class=\"line\"></span><br></pre></td></tr></table></figure>\n<p>修改成如下配置</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br><span class=\"line\">13</span><br><span class=\"line\">14</span><br><span class=\"line\">15</span><br><span class=\"line\">16</span><br><span class=\"line\">17</span><br><span class=\"line\">18</span><br><span class=\"line\">19</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[core]</span><br><span class=\"line\">\trepositoryformatversion = 0</span><br><span class=\"line\">\tfilemode = <span class=\"literal\">false</span></span><br><span class=\"line\">\tbare = <span class=\"literal\">false</span></span><br><span class=\"line\">\tlogallrefupdates = <span class=\"literal\">true</span></span><br><span class=\"line\">\tsymlinks = <span class=\"literal\">false</span></span><br><span class=\"line\">\tignorecase = <span class=\"literal\">true</span></span><br><span class=\"line\">[submodule]</span><br><span class=\"line\">\tactive = .</span><br><span class=\"line\">[remote <span class=\"string\">&quot;origin&quot;</span>]</span><br><span class=\"line\">\turl = git@github.com:eelve/fly.git</span><br><span class=\"line\">\tfetch = +refs/heads/*:refs/remotes/origin/*</span><br><span class=\"line\">\turl = git@gitee.com:eelve/fly.git</span><br><span class=\"line\">[branch <span class=\"string\">&quot;master&quot;</span>]</span><br><span class=\"line\">\tremote = origin</span><br><span class=\"line\">\tmerge = refs/heads/master</span><br><span class=\"line\">[remote <span class=\"string\">&quot;gitee&quot;</span>]</span><br><span class=\"line\">\turl = git@gitee.com:eelve/fly.git</span><br><span class=\"line\">\tfetch = +refs/heads/*:refs/remotes/github/*</span><br></pre></td></tr></table></figure>\n<p>添加一个remote远程仓库，并添加远程仓库地址，修改的部分如下</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">url = git@gitee.com:eelve/fly.git</span><br></pre></td></tr></table></figure>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">[remote <span class=\"string\">&quot;gitee&quot;</span>]</span><br><span class=\"line\">\turl = git@gitee.com:eelve/fly.git</span><br><span class=\"line\">\tfetch = +refs/heads/*:refs/remotes/github/*</span><br></pre></td></tr></table></figure>\n<h1 id=\"肆、推送测试\"><a href=\"#肆、推送测试\" class=\"headerlink\" title=\"肆、推送测试\"></a>肆、推送测试</h1><p>使用其他工具或者执行<code>git push</code>命令推送，我这里没有其他分支我这里就省略了分支名称等等</p>\n<figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">git push</span><br></pre></td></tr></table></figure>\n<p>然后查看gitee上面的仓库，可以看到，就已经成功推送上去了。</p>\n<p><img src=\"https://image.eelve.com/eblog/202004301-c3fd0726d60e4564baf69f2f541e53e3.png\" alt=\"202004301\"><br><img src=\"https://image.eelve.com/eblog/202004302-b29f20125242462faf4dee47d0b7d8a0.png\" alt=\"202004302\"></p>\n<hr>\n<p>【<strong>后面的话</strong>】完成上述工作之后，就能够做到一次推送，两个仓库都有代码了。</p>\n<hr>\n<p><img src=\"https://image.eelve.com/eblog/eblog-b269767ff45b4e01a1c380e38898c1c0.png\" alt=\"薏米笔记\"></p>\n","raw":null,"categories":[{"name":"git","path":"api/categories/git.json"}],"tags":[{"name":"git","path":"api/tags/git.json"}]}]}